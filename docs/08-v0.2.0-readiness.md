## v0.2.0 Edge Production Readiness

## Question Being Answered

**Can this platform operate at 10‚Äì100 sites reliably?**

**Answer (v0.2.0):**
Yes ‚Äî for **edge-only monitoring workloads**, with deterministic provisioning, explicit identity, and verified telemetry ingestion.

---

## Assumptions

* Edge-only deployment (no cloud dependency)
* Monitoring-focused (no actuation/control yet)
* Sites may be bandwidth-constrained or intermittently offline
* Gateways are managed via SSH + Git

---

## Guarantees (What v0.2.0 Explicitly Delivers)

### 1. Deterministic Provisioning

* Provisioning fails fast if required identity is missing:

  * `IRONLINK_CLIENT_ID`
  * `IRONLINK_SITE_ID`
  * `IRONLINK_GATEWAY_ID`
  * `IRONLINK_ENVIRONMENT`
  * `IRONLINK_HOSTNAME`
* No ‚Äúpartially configured‚Äù gateways allowed

### 2. Repeatable / Idempotent Setup

* `provision.sh` can be safely re-run
* Docker install is skipped if already present
* Hostname, timezone, firewall, and services converge to desired state

### 3. No Silent Data Loss (Within Scope)

* Telegraf logs ingestion and write errors explicitly
* MQTT consumption is observable via container logs
* InfluxDB authentication is enforced and verified

> Note: Store-and-forward across power/network outages is **not** guaranteed yet (v0.3.0).

### 4. Fleet-Level Identity at Ingestion

Every telemetry point is tagged at write time with:

* `client_id`
* `site_id`
* `gateway_id`
* `environment`
* `hostname`

This enables:

* Per-client isolation
* Per-site filtering
* Per-gateway debugging
* Safe multi-site scaling without topic collisions

### 5. Port & Service Conflict Protection

* Host services (`mosquitto`, `influxdb`, `grafana-server`) are disabled
* Container ports (1883 / 8086 / 3000) bind deterministically
* Prevents ‚Äúworks on some sites‚Äù class of failures

---

## Non-goals (Explicitly Out of Scope for v0.2.0)

* Cloud ingestion
* TLS-secured WAN MQTT
* Disk-backed buffering
* AI / ML
* Closed-loop control / actuation
* Remote OTA orchestration

---

## Known Risks (Accepted for v0.2.0)

| Risk                  | Status   | Mitigation                        |
| --------------------- | -------- | --------------------------------- |
| Power instability     | Accepted | Container restart policies        |
| Network outages       | Accepted | Edge-only operation               |
| Physical device theft | Accepted | No secrets committed to repo      |
| Credential exposure   | Partial  | Inline creds (to be fixed v0.3.0) |

---

## Operational Proof (This Is the ‚ÄúNo Fear‚Äù Part)

### Verified on Real Hardware

* Raspberry Pi gateway
* Docker-based stack
* Real MQTT telemetry ingested

### Evidence Snapshot (SITE-A)

InfluxDB query result confirms identity-tagged telemetry:

* `client_id = ZAM-WELD`
* `site_id = SITE-A`
* `gateway_id = GW-01`
* `environment = prod`
* `hostname = SITE-A-GW-01`
* Measurement: `mqtt_consumer`
* Fields: `temp_c`, `humidity`, `ts`

This proves:

* Identity propagation works
* Multi-site coexistence is safe
* Debugging is possible without guessing

---

## Operational Runbook

New sites are onboarded using a **repeatable technician workflow**:

üëâ `docs/runbooks/NEW_SITE_BRINGUP.md`

The runbook defines:

* Required inputs
* Exact commands to run
* Verification steps
* Failure recovery actions
* Definition of ‚Äúsite live‚Äù

---

## v0.2.0 Verdict

**v0.2.0 is production-ready for 10‚Äì100 edge sites** under the stated assumptions, for monitoring workloads, with:

* Predictable installs
* Explicit identity
* Verifiable telemetry
* Low operational ambiguity

Scaling beyond this (cloud ingest, buffering, zero-trust networking) is intentionally deferred to v0.3.0.

---

## What Changes Next (v0.3.0 Preview)

* Disk-backed store-and-forward
* TLS + authenticated MQTT
* Cloud ingest endpoint
* Central fleet health visibility

---

### What you can safely tweak later

* Topic naming conventions (`telegraf.conf`)
* Firewall posture (`IRONLINK_ENABLE_UFW`)
* Stack directory (`infra/poc-stack` ‚Üí `infra/edge-prod-stack`)


