[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  flush_interval = "10s"
  omit_hostname = true

# ----------------------------
# v0.2.0 Fleet Identity Tags
# ----------------------------
[global_tags]
  client_id   = "${IRONLINK_CLIENT_ID}"
  site_id     = "${IRONLINK_SITE_ID}"
  gateway_id  = "${IRONLINK_GATEWAY_ID}"
  environment = "${IRONLINK_ENVIRONMENT}"
  hostname    = "${IRONLINK_HOSTNAME}"

[[inputs.mqtt_consumer]]
  servers = ["tcp://mosquitto:1883"]
  topics = [
    "ironlink/env/HOME/esp32/dht11"
  ]
  qos = 0
  connection_timeout = "30s"
  persistent_session = false
  data_format = "json"
  json_string_fields = ["topic"]
  topic_tag = "topic"

[[outputs.influxdb]]
  urls = ["http://influxdb:8086"]
  database = "telemetry"
  username = "ironadmin"
  password = "SuperSecretPass123"

